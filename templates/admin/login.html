{% extends 'unfold/layouts/unauthenticated.html' %}

{% load crispy_forms_tags unfold static %}

{% block base %}
    <div class="relative min-h-screen flex">

        <!-- Lado Izquierdo - Carrusel -->
        <div class="hidden lg:flex lg:w-1/2 relative bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900">
            <!-- Imagen de fondo del carrusel -->
            <div class="absolute inset-0">
                <img id="carousel-image"
                     class="w-full h-full object-cover object-center transition-opacity duration-700"
                     src="{% static 'src/app/img4.png' %}"
                     alt="Slide"/>
                <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"></div>
            </div>
            <div class="relative z-10 flex flex-col justify-center items-center w-full p-12">
                <div class="max-w-2xl w-full p-6 sm:p-10 backdrop-blur-md backdrop-filter bg-black/35 rounded-3xl">
                    <div id="carousel-content" class="transition-opacity duration-500">

                        <div class="carousel-slide active">
                            <h5 class="text-3xl text-white font-semibold mb-2">Sistema de Gestión de Obras Civiles </h5>
                            <span class="block text-sm text-white font-semibold mb-6">SGOC</span>
                            <p class="max-w-xl text-xl text-white font-medium">Administra proyectos de construcción con
                                información detallada: ubicación, cliente, presupuesto y estado en tiempo real.</p>
                        </div>
                        <div class="carousel-slide hidden">
                            <h5 class="text-3xl text-white font-semibold mb-2">Reportes de Avance</h5>
                            <span class="block text-sm text-white font-semibold mb-6">SGOC</span>
                            <p class="max-w-xl text-xl text-white font-medium">Documenta el progreso con porcentajes,
                                observaciones, fotos y coordinación de cuadrillas asignadas.</p>
                        </div>

                        <div class="carousel-slide hidden">
                            <h5 class="text-3xl text-white font-semibold mb-2">Elementos Constructivos</h5>
                            <span class="block text-sm text-white font-semibold mb-6">SGOC</span>
                            <p class="max-w-xl text-xl text-white font-medium">Organiza y controla cada componente del
                                proyecto con estructura jerárquica y seguimiento de progreso individual.</p>
                        </div>


                    </div>

                    <div class="flex justify-center gap-3 mt-12">
                        <button onclick="changeSlide(0)"
                                class="carousel-indicator h-1.5 w-12 bg-blue-500 rounded-full transition-all duration-300 cursor-pointer hover:bg-blue-400">
                        </button>
                        <button onclick="changeSlide(1)"
                                class="carousel-indicator h-1.5 w-12 bg-white/30 rounded-full transition-all duration-300 cursor-pointer hover:bg-white/50">
                        </button>
                        <button onclick="changeSlide(2)"
                                class="carousel-indicator h-1.5 w-12 bg-white/30 rounded-full transition-all duration-300 cursor-pointer hover:bg-white/50">
                        </button>
                    </div>
                </div>
            </div>


        </div>


        <div class="w-full lg:w-1/2 flex items-center justify-center relative bg-cover bg-center bg-fixed"
             style="background-image: url('{% static "src/img/fondo_login.jpeg" %}');">


            <div class="absolute inset-0 bg-gradient-to-t from-black/50 via-black/80 to-black">

            </div>

            <div class="absolute h-full w-full">

                <div class="absolute bottom-0 left-0 right-0 top-0
                bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px]
                [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_110%)]">
                </div>
            </div>

            <div class="relative z-10 w-full max-w-md px-8 py-12">
                {% include "unfold/helpers/unauthenticated_header.html" %}


                <div class="flex justify-center mb-8">
                    <div class="h-24 w-24 rounded-full bg-gradient-to-br from-blue-500 via-blue-600 to-blue-300 flex items-center justify-center shadow-xl shadow-blue-500/30">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             fill="none"
                             viewBox="0 0 24 24"
                             class="h-12 w-12 text-white stroke-current stroke-2">
                            <path stroke-linecap="round"
                                  stroke-linejoin="round"
                                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z">
                            </path>
                        </svg>
                    </div>
                </div>


                <div class="text-center mb-10">
                    <h1 class="text-3xl font-bold text-white mb-3">Bienvenido de vuelta</h1>
                    <p class="text-gray-400">Ingresa tus credenciales para continuar</p>
                </div>

                <form action="{{ app_path }}" method="post" id="login-form" class="space-y-6">
                    {% csrf_token %}


                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Usuario</label>
                        <div class="relative">
                            {{ form.username }}
                        </div>
                    </div>


                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Contraseña</label>
                        <div class="relative">
                            {{ form.password }}
                        </div>
                    </div>

                    <div class="pt-4">
                        {% component "unfold/components/button.html" with type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors duration-200" %}
                            {{ form.submit.value|default:"Iniciar Sesión" }}
                        {% endcomponent %}
                    </div>
                </form>
            </div>
            <div id="gdpr"
                 class="bg-white dark:bg-base-900 fixed z-50 p-3 py-4 rounded-full drop-shadow-2xl bottom-12 left-1/2 -translate-x-1/2 max-sm:w-11/12">
                <div class="flex items-center justify-between gap-6 text-sm">
                    <div class="content-left pl-4">
                        Solicitar Acceso al Sistema
                    </div>
                    <div class="content-right text-end">
                        <a href="https://portafolio-rauantodev.vercel.app/"  class="bg-primary-500 text-white px-4 py-2 cursor-pointer rounded-full">Solicitar</a>
                    </div>
                </div>
            </div>
        </div>

    </div>



    <script>
        let currentSlide = 0;
        const totalSlides = 3;
        let autoPlayInterval;

        // Array de imágenes - PERSONALIZA ESTAS RUTAS CON TUS IMÁGENES
        const slideImages = [
            "{% static 'src/app/img4.png' %}",
            "{% static 'src/app/img5.png' %}",
            "{% static 'src/app/img6.png' %}"
        ];

        function changeSlide(index) {
            const slides = document.querySelectorAll('.carousel-slide');
            const indicators = document.querySelectorAll('.carousel-indicator');
            const image = document.getElementById('carousel-image');

            // Remover estado activo del slide actual
            slides[currentSlide].classList.remove('active');
            slides[currentSlide].classList.add('hidden');

            // Remover estado activo del indicador actual
            indicators[currentSlide].classList.remove('bg-blue-500', 'w-12');
            indicators[currentSlide].classList.add('bg-white/30', 'w-12');

            // Actualizar índice
            currentSlide = index;

            // Activar nuevo slide
            slides[currentSlide].classList.remove('hidden');
            slides[currentSlide].classList.add('active');

            // Activar nuevo indicador
            indicators[currentSlide].classList.remove('bg-white/30');
            indicators[currentSlide].classList.add('bg-blue-500');

            // Cambiar imagen con efecto fade
            image.style.opacity = '0.3';
            setTimeout(() => {
                image.src = slideImages[currentSlide];
                image.style.opacity = '1';
            }, 350);

            // Reiniciar autoplay
            resetAutoPlay();
        }

        function nextSlide() {
            const next = (currentSlide + 1) % totalSlides;
            changeSlide(next);
        }

        function resetAutoPlay() {
            clearInterval(autoPlayInterval);
            autoPlayInterval = setInterval(nextSlide, 6000); // Cambia cada 6 segundos
        }

        // Iniciar autoplay cuando carga la página
        document.addEventListener('DOMContentLoaded', function () {
            resetAutoPlay();
        });

        // Pausar el autoplay cuando el usuario pasa el mouse sobre el carrusel
        const carouselSection = document.querySelector('.lg\\:w-1\\/2');
        if (carouselSection) {
            carouselSection.addEventListener('mouseenter', () => {
                clearInterval(autoPlayInterval);
            });

            carouselSection.addEventListener('mouseleave', () => {
                resetAutoPlay();
            });
        }
    </script>

{% endblock %}